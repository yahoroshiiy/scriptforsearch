## TGO SINT CSV Search

Простой офлайн-инструмент для поиска по большим CSV-базам данных (телефон, ФИО, email) с генерацией красивых HTML‑отчётов.

### Структура проекта

- **`main.py`** – вся логика:
  - загрузка конфигурации баз;
  - поиск по CSV;
  - интерактивный консольный интерфейс;
  - генерация HTML‑отчётов в папку `reports/`.
- **`config.py`** – описание всех баз:
  - словарь `DATASET_CONFIG` с путями к CSV и настройками полей;
  - константы (например, `HTML_OUTPUT_DIR = 'reports'`).
- **`database/`** – сами CSV‑файлы баз данных.
- **`reports/`** – сюда сохраняются HTML‑отчёты (создаётся автоматически при первом сохранении отчёта).
- **`requirements.txt`** – зависимости Python.

---

## Установка

1. **Клонируйте или скопируйте проект** на машину.
2. **Создайте и активируйте виртуальное окружение (по желанию):**

```bash
python -m venv venv
source venv/bin/activate  # Linux / macOS
# или
venv\Scripts\activate.bat  # Windows
```

3. **Установите зависимости:**

```bash
pip install -r requirements.txt
```

4. **Положите CSV‑файлы** в папку `database/` (в корне проекта).

---

## Запуск поиска

Из корня проекта:

```bash
python main.py
```

Дальше:
- появится информация, какие CSV‑базы найдены;
- в консоли будет приглашение:
  - введите **телефон**, **ФИО** или **email**;
  - пустой ввод — выход.
- после каждого поиска программа предложит **сохранить HTML‑отчёт** в папку `reports/`.

---

## Как добавлять свои базы данных (CSV)

Основная идея:
- каждый CSV‑файл лежит в папке `database/`;
- в `config.py` для него создаётся отдельная запись в `DATASET_CONFIG`.

### 1. Положить файл в `database/`

Например:

- `database/Мой Банк.csv`
- `database/clients.csv`

### 2. Добавить описание в `config.py`

Откройте `config.py` и в словарь `DATASET_CONFIG` добавьте новый блок по образцу:

```python
DATASET_CONFIG: Dict[str, Dict] = {
    # ... существующие базы ...
    'my_bank': {
        'name': 'Мой Банк',
        'file': 'database/Мой Банк.csv',
        'encoding': None,          # или 'utf-8', 'cp1251' и т.д., если знаете
        'separator': ';',          # ';' или ',' или другой разделитель
        # Если в файле НЕТ строки-заголовка, укажите колонки вручную:
        # 'has_header': False,
        # 'columns': ['ФИО', 'Телефон', 'Email'],
        'search_fields': {
            'phone': ['Телефон'],   # в каких колонках искать телефон
            'name': ['ФИО'],        # в каких колонках искать ФИО / имя
            'email': ['Email'],     # в каких колонках искать email
        },
        'display_fields': ['ФИО', 'Телефон', 'Email'],  # какие поля показывать в результатах
    },
}
```

**Ключевые поля:**
- **`file`** – путь к CSV относительно корня проекта, всегда через `database/...`.
- **`separator`** – разделитель в CSV (часто `;` или `,`).
- **`encoding`** – кодировка (если `None`, используется значение по умолчанию).
- **`has_header`** / **`columns`**:
  - если в CSV есть первая строка‑заголовок — можно не указывать (по умолчанию `has_header = True`);
  - если заголовка нет — задайте `has_header: False` и список `columns` в нужном порядке.
- **`search_fields`** – по каким колонкам искать:
  - `phone` – список имён колонок с телефонами;
  - `name` – ФИО, города, названия и т.п.;
  - `email` – колонки с email.
- **`display_fields`** – какие поля выводить в результатах и отчёте.

После сохранения `config.py` и перезапуска `python main.py` новая база начнёт участвовать в поиске автоматически.

---

## Как использовать нейросеть, чтобы она сама написала конфиг под вашу базу

Если не хотите вручную разбираться в колонках, можно попросить нейросеть (ChatGPT, другой LLM) сгенерировать нужный фрагмент `config.py`.

### Шаги

1. **Подготовьте пример CSV:**
   - возьмите ваш файл из `database/` (или часть строк);
   - желательно включить **первую строку** (заголовки, если есть) и несколько строк с данными.

2. **Отправьте нейросети:**
   - сам CSV (или вырезку из него);
   - текущий файл **`config.py`** из проекта;
   - задачу примерно в таком виде:

> «Вот пример моего CSV‑файла и текущий `config.py`.  
> Добавь в `DATASET_CONFIG` новый блок для этого файла, чтобы можно было искать по телефону, ФИО и email (если есть).  
> Файл лежит в `database/ИМЯ_ФАЙЛА.csv`. Напиши готовый фрагмент Python‑кода для вставки в `config.py`.»

3. **Вставьте ответ в `config.py`:**
   - нейросеть вернёт готовый словарь вида:

```python
'my_new_dataset': {
    'name': 'Описание моей базы',
    'file': 'database/ИМЯ_ФАЙЛА.csv',
    'encoding': 'cp1251',
    'separator': ';',
    'search_fields': {
        'phone': ['Телефон'],
        'name': ['Фамилия', 'Имя', 'Отчество'],
        'email': ['Email'],
    },
    'display_fields': ['Фамилия', 'Имя', 'Отчество', 'Телефон', 'Email'],
},
```

   - аккуратно вставьте этот блок внутрь `DATASET_CONFIG` (не забывая про запятые между элементами словаря).

4. **Перезапустите поиск:**

```bash
python main.py
```

Теперь инструмент будет искать и по вашей новой базе.

---

## Рекомендации по CSV‑файлам

- Не кладите огромные CSV в Git‑репозиторий, лучше держать их только локально в `database/`.
- Следите, чтобы **имена колонок** в `search_fields` и `display_fields` **строго совпадали** с заголовками в файле (учитывая регистр и пробелы).
- При проблемах с русскими буквами попробуйте явно указать `encoding` (`'cp1251'`, `'utf-8'` и т.п.) в соответствующем конфиге базы.

